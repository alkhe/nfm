!function(u){var M=function(){var a=window.can||{};"undefined"!=typeof GLOBALCAN&&!1===GLOBALCAN||(window.can=a);a.k=function(){};a.isDeferred=function(a){return a&&"function"==typeof a.then&&"function"==typeof a.pipe};var e=0;return a.cid=function(a,g){return a._cid||(e++,a._cid=(g||"")+e),a._cid},a.VERSION="2.1.2",a.simpleExtend=function(a,g){for(var e in g)a[e]=g[e];return a},a.frag=function(e){var g;return e&&"string"!=typeof e?11===e.nodeType?e:"number"==typeof e.nodeType?(g=document.createDocumentFragment(),
g.appendChild(e),g):"number"==typeof e.length?(g=document.createDocumentFragment(),a.each(e,function(e){g.appendChild(a.frag(e))}),g):(g=a.buildFragment(""+e,document.body),g.childNodes.length||g.appendChild(document.createTextNode("")),g):(g=a.buildFragment(null==e?"":""+e,document.body),g.childNodes.length||g.appendChild(document.createTextNode("")),g)},a.__reading=function(){},a}(),z=function(a){var e=window.setImmediate||function(a){return setTimeout(a,0)},m={MutationObserver:window.MutationObserver||
window.WebKitMutationObserver||window.MozMutationObserver,map:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(a,e){return null==e||""===e?(a.removeAttribute("src"),null):(a.setAttribute("src",e),e)},style:function(a,e){return a.style.cssText=e||""}},defaultValue:["input","textarea"],set:function(g,e,p){var n;m.MutationObserver||(n=m.get(g,e));var c,d=g.nodeName.toString().toLowerCase(),f=m.map[e];"function"==
typeof f?c=f(g,p):!0===f?(c=g[e]=!0,"checked"===e&&"radio"===g.type&&0<=a.inArray(d,m.defaultValue)&&(g.defaultChecked=!0)):f?(c=g[f]=p,"value"===f&&0<=a.inArray(d,m.defaultValue)&&(g.defaultValue=p)):(g.setAttribute(e,p),c=p);m.MutationObserver||c===n||m.trigger(g,e,n)},trigger:function(g,m,p){return a.data(a.$(g),"canHasAttributesBindings")?e(function(){a.trigger(g,{type:"attributes",attributeName:m,target:g,oldValue:p,bubbles:!1},[])}):void 0},get:function(a,e){var p=m.map[e];return"string"==typeof p&&
a[p]?a[p]:a.getAttribute(e)},remove:function(a,e){var p;m.MutationObserver||(p=m.get(a,e));var n=m.map[e];"function"==typeof n&&n(a,u);!0===n?a[e]=!1:"string"==typeof n?a[n]="":a.removeAttribute(e);m.MutationObserver||null==p||m.trigger(a,e,p)},has:function(){return document.createElement("div").hasAttribute?function(a,e){return a.hasAttribute(e)}:function(a,e){return null!==a.getAttribute(e)}}()};return m}(M),X=function(a){return a.addEvent=function(a,m){var g=this.__bindEvents||(this.__bindEvents=
{});return(g[a]||(g[a]=[])).push({handler:m,name:a}),this},a.listenTo=function(e,m,g){var h=this.__listenToEvents;h||(h=this.__listenToEvents={});var p=a.cid(e),n=h[p];n||(n=h[p]={obj:e,events:{}});(h=n.events[m])||(h=n.events[m]=[]);h.push(g);a.bind.call(e,m,g)},a.stopListening=function(e,m,g){var h=this.__listenToEvents,p=h,n=0;if(!h||e&&(e=a.cid(e),(p={})[e]=h[e],!h[e]))return this;for(var c in p){var d,f=p[c];e=h[c].obj;m?(d={})[m]=f.events[m]:d=f.events;for(var b in d){for(var q=d[b]||[],n=0;n<
q.length;)g&&g===q[n]||!g?(a.unbind.call(e,b,q[n]),q.splice(n,1)):n++;q.length||delete f.events[b]}a.isEmptyObject(f.events)&&delete h[c]}return this},a.removeEvent=function(a,m,g){if(!this.__bindEvents)return this;for(var h,p=this.__bindEvents[a]||[],n=0,c="function"==typeof m;n<p.length;)h=p[n],(g?g(h,a,m):c&&h.handler===m||!(c||h.cid!==m&&m))?p.splice(n,1):n++;return this},a.dispatch=function(a,m){var g=this.__bindEvents;if(g){"string"==typeof a&&(a={type:a});var g=(g[a.type]||[]).slice(0),h=[a];
m&&h.push.apply(h,m);for(var p=0,n=g.length;n>p;p++)g[p].handler.apply(this,h);return a}},a.one=function(e,m){var g=function(){return a.unbind.call(this,e,g),m.apply(this,arguments)};return a.bind.call(this,e,g),this},a.event={on:function(){return 0===arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.on.call(this):a.addEvent.apply(this,arguments)},off:function(){return 0===arguments.length&&a.Control&&this instanceof a.Control?a.Control.prototype.off.call(this):a.removeEvent.apply(this,
arguments)},bind:a.addEvent,unbind:a.removeEvent,delegate:function(e,m,g){return a.addEvent.call(this,m,g)},undelegate:function(e,m,g){return a.removeEvent.call(this,m,g)},trigger:a.dispatch,one:a.one,addEvent:a.addEvent,removeEvent:a.removeEvent,listenTo:a.listenTo,stopListening:a.stopListening,dispatch:a.dispatch},a.event}(M),L=function(a){return a.each=function(e,m,g){var h,p,n,c=0;if(e)if(p=e.length,"function"!=typeof arr&&(0===p||"number"==typeof p&&0<p&&p-1 in e))if(a.List&&e instanceof a.List)for(p=
e.attr("length");p>c&&(n=e.attr(c),!1!==m.call(g||n,n,c,e));c++);else for(p=e.length;p>c&&(n=e[c],!1!==m.call(g||n,n,c,e));c++);else if("object"==typeof e)if(a.Map&&e instanceof a.Map||e===a.route){var d=a.Map.keys(e),c=0;for(p=d.length;p>c&&(h=d[c],n=e.attr(h),!1!==m.call(g||n,n,h,e));c++);}else for(h in e)if(e.hasOwnProperty(h)&&!1===m.call(g||e[h],e[h],h,e))break;return e},a}(M),R=function(a){a.inserted=function(e){e=a.makeArray(e);for(var m,g,h=!1,p=a.$(document.contains?document:document.body),
n=0;(g=e[n])!==u;n++){if(!h){if(!g.getElementsByTagName)continue;if(!a.has(p,g).length)break;h=!0}if(h&&g.getElementsByTagName){m=a.makeArray(g.getElementsByTagName("*"));a.trigger(g,"inserted",[],!1);for(var c=0;(g=m[c])!==u;c++)a.trigger(g,"inserted",[],!1)}}};a.appendChild=function(e,m){var g;g=11===m.nodeType?a.makeArray(m.childNodes):[m];e.appendChild(m);a.inserted(g)};a.insertBefore=function(e,m,g){var h;h=11===m.nodeType?a.makeArray(m.childNodes):[m];e.insertBefore(m,g);a.inserted(h)}}(M),
z=function(a,e,m){var g=function(a){return a.nodeName&&(1===a.nodeType||9===a.nodeType)||a==window};a.extend(e,a,{trigger:function(f,b,c,s){g(f)?a.event.trigger(b,c,f,!s):f.trigger?f.trigger(b,c):("string"==typeof b&&(b={type:b}),b.target=b.target||f,c&&(c.length&&"string"==typeof c?c=[c]:c.length||(c=[c])),c||(c=[]),e.dispatch.call(f,b,c))},event:e.event,addEvent:e.addEvent,removeEvent:e.removeEvent,buildFragment:function(f,b){var c;return f=[f],b=b||document,b=!b.nodeType&&b[0]||b,b=b.ownerDocument||
b,c=a.buildFragment(f,b),c.cacheable?a.clone(c.fragment):c.fragment||c},$:a,each:e.each,bind:function(f,b){return this.bind&&this.bind!==e.bind?this.bind(f,b):g(this)?a.event.add(this,f,b):e.addEvent.call(this,f,b),this},unbind:function(f,b){return this.unbind&&this.unbind!==e.unbind?this.unbind(f,b):g(this)?a.event.remove(this,f,b):e.removeEvent.call(this,f,b),this},delegate:function(f,b,c){return this.delegate?this.delegate(f,b,c):g(this)?a(this).delegate(f,b,c):e.bind.call(this,b,c),this},undelegate:function(c,
b,q){return this.undelegate?this.undelegate(c,b,q):g(this)?a(this).undelegate(c,b,q):e.unbind.call(this,b,q),this},proxy:function(a,b){return function(){return a.apply(b,arguments)}},attr:m});e.on=e.bind;e.off=e.unbind;a.each("append filter addClass remove data get has".split(" "),function(a,b){e[b]=function(a){return a[b].apply(a,e.makeArray(arguments).slice(1))}});var h=a.cleanData;a.cleanData=function(c){a.each(c,function(a,c){c&&e.trigger(c,"removed",[],!1)});h(c)};var p,n=a.fn.domManip;if(a.fn.domManip=
function(){for(var a=1;a<arguments.length;a++)if("function"==typeof arguments[a]){p=a;break}return n.apply(this,arguments)},a(document.createElement("div")).append(document.createElement("div")),a.fn.domManip=2===p?function(a,b,c){return n.call(this,a,b,function(a){var b;11===a.nodeType&&(b=e.makeArray(a.childNodes));var r=c.apply(this,arguments);return e.inserted(b?b:[a]),r})}:function(a,b){return n.call(this,a,function(a){var c;11===a.nodeType&&(c=e.makeArray(a.childNodes));var l=b.apply(this,arguments);
return e.inserted(c?c:[a]),l})},e.attr.MutationObserver)a.event.special.attributes={setup:function(){var a=this,b=new e.attr.MutationObserver(function(b){b.forEach(function(b){b=e.simpleExtend({},b);e.trigger(a,b,[])})});b.observe(this,{attributes:!0,attributeOldValue:!0});e.data(e.$(this),"canAttributesObserver",b)},teardown:function(){e.data(e.$(this),"canAttributesObserver").disconnect();a.removeData(this,"canAttributesObserver")}};else{var c=a.attr;a.attr=function(a,b){var q,s;3<=arguments.length&&
(q=c.call(this,a,b));var l=c.apply(this,arguments);return 3<=arguments.length&&(s=c.call(this,a,b)),s!==q&&e.attr.trigger(a,b,q),l};var d=a.removeAttr;a.removeAttr=function(a,b){var q=c.call(this,a,b),s=d.apply(this,arguments);return null!=q&&e.attr.trigger(a,b,q),s};a.event.special.attributes={setup:function(){e.data(e.$(this),"canHasAttributesBindings",!0)},teardown:function(){a.removeData(this,"canHasAttributesBindings")}}}return function(){if("<-\n>"!==e.buildFragment("<-\n>",document).childNodes[0].nodeValue){var a=
e.buildFragment;e.buildFragment=function(b,c){var s=a(b,c);return 1===s.childNodes.length&&3===s.childNodes[0].nodeType&&(s.childNodes[0].nodeValue=b),s}}}(),a.event.special.inserted={},a.event.special.removed={},e}(jQuery,M,z,X,L,R),K=function(a){var e=a.isFunction,m=a.makeArray,g=1,h=function(a){var c=function(){return f.frag(a.apply(this,arguments))};return c.render=function(){return a.apply(a,arguments)},c},p=function(a,c){if(!a.length)throw"can.view: No template or empty template:"+c;},n=function(b,
c){var s,l,r,k="string"==typeof b?b:b.url,d=b.engine&&"."+b.engine||k.match(/\.[\w\d]+$/);if(k.match(/^#/)&&(k=k.substr(1)),(l=document.getElementById(k))&&(d="."+l.type.match(/\/(x\-)?(.+)/)[2]),d||f.cached[k]||(k+=d=f.ext),a.isArray(d)&&(d=d[0]),r=f.toId(k),k.match(/^\/\//)&&(k=k.substr(2),k=window.steal?steal.config().root.mapJoin(""+steal.id(k)):k),window.require&&require.toUrl&&(k=require.toUrl(k)),s=f.types[d],f.cached[r])return f.cached[r];if(l)return f.registerView(r,l.innerHTML,s);var A=
new a.Deferred;return a.ajax({async:c,url:k,dataType:"text",error:function(a){p("",k);A.reject(a)},success:function(a){p(a,k);f.registerView(r,a,s,A)}}),A},c=function(b){var c=[];if(a.isDeferred(b))return[b];for(var f in b)a.isDeferred(b[f])&&c.push(b[f]);return c},d=function(b){return a.isArray(b)&&"success"===b[1]?b[0]:b},f=a.view=a.template=function(a,c,s,l){e(s)&&(l=s,s=u);return e(a)?a(c,s,l):f.renderAs("fragment",a,c,s,l)};return a.extend(f,{frag:function(a,c){return f.hookup(f.fragment(a),
c)},fragment:function(b){if("string"!=typeof b&&11===b.nodeType)return b;b=a.buildFragment(b,document.body);return b.childNodes.length||b.appendChild(document.createTextNode("")),b},toId:function(b){return a.map(b.toString().split(/\/|\./g),function(a){return a?a:void 0}).join("_")},toStr:function(a){return null==a?"":""+a},hookup:function(b,c){var s,l,r=[];return a.each(b.childNodes?a.makeArray(b.childNodes):b,function(b){1===b.nodeType&&(r.push(b),r.push.apply(r,a.makeArray(b.getElementsByTagName("*"))))}),
a.each(r,function(a){a.getAttribute&&(s=a.getAttribute("data-view-id"))&&(l=f.hookups[s])&&(l(a,c,s),delete f.hookups[s],a.removeAttribute("data-view-id"))}),b},hookups:{},hook:function(a){return f.hookups[++g]=a," data-view-id='"+g+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(b){this.types["."+b.suffix]=b;a[b.suffix]=f[b.suffix]=function(a,c){var l,r;if(!c)return r=function(){return l||(l=b.fragRenderer?b.fragRenderer(null,a):h(b.renderer(null,a))),l.apply(this,arguments)},r.render=
function(){var l=b.renderer(null,a);return l.apply(l,arguments)},r;r=function(){return l||(l=b.fragRenderer?b.fragRenderer(a,c):b.renderer(a,c)),l.apply(this,arguments)};return b.fragRenderer?f.preload(a,r):f.preloadStringRenderer(a,r)}},types:{},ext:".ejs",registerScript:function(a,c,s){return"can.view.preloadStringRenderer('"+c+"',"+f.types["."+a].script(c,s)+");"},preload:function(b,c){return(f.cached[b]=(new a.Deferred).resolve(function(a,b){return c.call(a,a,b)})).__view_id=b,f.cachedRenderers[b]=
c,c},preloadStringRenderer:function(a,c){return this.preload(a,h(c))},render:function(b,c,f,l){return a.view.renderAs("string",b,c,f,l)},renderTo:function(a,c,f,l){return("string"===a&&c.render?c.render:c)(f,l)},renderAs:function(b,q,s,l,r){e(l)&&(r=l,l=u);var k,v,A,g,p,h=c(s);if(h.length)return v=new a.Deferred,A=a.extend({},s),h.push(n(q,!0)),a.when.apply(a,h).then(function(c){var k;k=m(arguments);var f=k.pop();if(a.isDeferred(s))A=d(c);else for(var q in s)a.isDeferred(s[q])&&(A[q]=d(k.shift()));
k=a.view.renderTo(b,f,A,l);v.resolve(k,A);r&&r(k,A)},function(){v.reject.apply(v,arguments)}),v;if(k=a.__clearReading(),g=e(r),v=n(q,g),k&&a.__setReading(k),g)p=v,v.then(function(c){r(s?a.view.renderTo(b,c,s,l):c)});else{if("resolved"===v.state()&&v.__view_id)return q=f.cachedRenderers[v.__view_id],s?a.view.renderTo(b,q,s,l):q;v.then(function(c){p=s?a.view.renderTo(b,c,s,l):c})}return p},registerView:function(b,c,s,l){var r;s="object"==typeof s?s:f.types[s||f.ext];return r=s.fragRenderer?s.fragRenderer(b,
c):h(s.renderer(b,c)),l=l||new a.Deferred,f.cache&&(f.cached[b]=l,l.__view_id=b,f.cachedRenderers[b]=r),l.resolve(r)}}),a}(z),R=function(a){var e=a.view.attr=function(a,d){if(!d){var f=m[a];if(!f)for(var b=0,q=g.length;q>b;b++){var s=g[b];if(s.match.test(a)){f=s.handler;break}}return f}"string"==typeof a?m[a]=d:g.push({match:a,handler:d})},m={},g=[],h=/[-\:]/,p=a.view.tag=function(a,d){if(!d){var f=n[a.toLowerCase()];return!f&&h.test(a)&&(f=function(){}),f}window.html5&&(window.html5.elements+=" "+
a,window.html5.shivDocument());n[a.toLowerCase()]=d},n={};return a.view.callbacks={_tags:n,_attributes:m,_regExpAttributes:g,tag:p,attr:e,tagHandler:function(c,d,f){var b;b=f.options.attr("tags."+d)||n[d];d=f.scope;if(b){var q=a.__clearReading();b=b(c,f);a.__setReading(q)}else b=d;b&&f.subtemplate&&(d!==b&&(d=d.add(b)),f=f.subtemplate(d,f.options),f="string"==typeof f?a.view.frag(f):f,a.appendChild(c,f))}},a.view.callbacks}(z,K),ca=function(a){var e=/\=\=/,m=/([A-Z]+)([A-Z][a-z])/g,g=/([a-z\d])([A-Z])/g,
h=/([a-z\d])([A-Z])/g,p=/\{([^\}]+)\}/g,n=/"/g,c=/'/g,d=/-+(.)?/g,f=/[a-z][A-Z]/g,b=function(a,b,c){var k=a[b];return k===u&&!0===c&&(k=a[b]={}),k},q=function(a){return""+(null===a||a===u||isNaN(a)&&"NaN"==""+a?"":a)};return a.extend(a,{esc:function(a){return q(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(n,"&#34;").replace(c,"&#39;")},getObject:function(c,l,r){var k,f,d,q=c?c.split("."):[],n=q.length,e=0;if(l=a.isArray(l)?l:[l||window],c=l.length,!n)return l[0];for(e;c>
e;e++){k=l[e];d=u;for(f=0;n>f&&/^f|^o/.test(typeof k);f++)d=k,k=b(d,q[f]);if(d!==u&&k!==u)break}if(!1===r&&k!==u&&delete d[q[f-1]],!0===r&&k===u)for(k=l[0],f=0;n>f&&/^f|^o/.test(typeof k);f++)k=b(k,q[f],!0);return k},capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(a){return q(a).replace(d,function(a,b){return b?b.toUpperCase():""})},hyphenate:function(a){return q(a).replace(f,function(a){return a.charAt(0)+"-"+a.charAt(1).toLowerCase()})},underscore:function(a){return a.replace(e,
"/").replace(m,"$1_$2").replace(g,"$1_$2").replace(h,"_").toLowerCase()},sub:function(b,l,c){var k=[];return b=b||"",k.push(b.replace(p,function(b,f){var d=a.getObject(f,l,!0===c?!1:u);return d===u||null===d?(k=null,""):/^f|^o/.test(typeof d)&&k?(k.push(d),""):""+d})),null===k?k:1>=k.length?k[0]:k},replacer:p,undHash:/_|-/}),a}(z),Y=function(a){var e=0;return a.Construct=function(){return arguments.length?a.Construct.extend.apply(a.Construct,arguments):void 0},a.extend(a.Construct,{constructorExtends:!0,
newInstance:function(){var a,e=this.instance();return e.setup&&(a=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,a||arguments),e},_inherit:function(e,g,h){a.extend(h||e,e||{})},_overwrite:function(a,e,h,p){a[h]=p},setup:function(e){this.defaults=a.extend(!0,{},e.defaults,this.defaults)},instance:function(){e=1;var a=new this;return e=0,a},extend:function(m,g,h){function p(){return e?void 0:this.constructor!==p&&arguments.length&&p.constructorExtends?p.extend.apply(p,arguments):p.newInstance.apply(p,
arguments)}"string"!=typeof m&&(h=g,g=m,m=null);h||(h=g,g=null);h=h||{};var n,c,d,f,b,q,s,l,r=this.prototype;l=this.instance();a.Construct._inherit(h,r,l);for(b in this)this.hasOwnProperty(b)&&(p[b]=this[b]);a.Construct._inherit(g,this,p);m&&(n=m.split("."),q=n.pop(),c=a.getObject(n.join("."),window,!0),s=c,d=a.underscore(m.replace(/\./g,"_")),f=a.underscore(q),c[q]=p);a.extend(p,{constructor:p,prototype:l,namespace:s,_shortName:f,fullName:m,_fullName:d});q!==u&&(p.shortName=q);p.prototype.constructor=
p;n=[this].concat(a.makeArray(arguments));c=p.setup.apply(p,n);return p.init&&p.init.apply(p,c||n),p}}),a.Construct.prototype.setup=function(){},a.Construct.prototype.init=function(){},a.Construct}(ca),X=function(a){var e,m=function(b,c,k){return a.bind.call(b,c,k),function(){a.unbind.call(b,c,k)}},g=a.isFunction,h=a.extend,p=a.each,n=[].slice,c=/\{([^\}]+)\}/g,d=a.getObject("$.event.special",[a])||{},f=function(b,c,k,f){return a.delegate.call(b,c,k,f),function(){a.undelegate.call(b,c,k,f)}},b=function(b,
c,k,d){return d?f(b,a.trim(d),c,k):m(b,c,k)},q=a.Control=a.Construct({setup:function(){if(a.Construct.setup.apply(this,arguments),a.Control){var b;this.actions={};for(b in this.prototype)this._isAction(b)&&(this.actions[b]=this._action(b))}},_shifter:function(b,c){var k="string"==typeof c?b[c]:c;return g(k)||(k=b[k]),function(){return b.called=c,k.apply(b,[this.nodeName?a.$(this):this].concat(n.call(arguments,0)))}},_isAction:function(a){var b=this.prototype[a],c=typeof b;return"constructor"!==a&&
("function"===c||"string"===c&&g(this.prototype[b]))&&!!(d[a]||s[a]||/[^\w]/.test(a))},_action:function(b,f){if(c.lastIndex=0,f||!c.test(b)){var k=f?a.sub(b,this._lookup(f)):b;if(!k)return null;var d=a.isArray(k),q=d?k[1]:k,n=q.split(/\s+/g),g=n.pop();return{processor:s[g]||e,parts:[q,n.join(" "),g],delegate:d?k[0]:u}}},_lookup:function(a){return[a,window]},processors:{},defaults:{}},{setup:function(b,c){var k,f=this.constructor,d=f.pluginName||f._fullName;return this.element=a.$(b),d&&"can_control"!==
d&&this.element.addClass(d),k=a.data(this.element,"controls"),k||(k=[],a.data(this.element,"controls",k)),k.push(this),this.options=h({},f.defaults,c),this.on(),[this.element,this.options]},on:function(c,f,k,d){if(!c){this.off();var q,s;c=this.constructor;f=this._bindings;k=c.actions;d=this.element;var e=a.Control._shifter(this,"destroy");for(q in k)k.hasOwnProperty(q)&&(s=k[q]||c._action(q,this.options,this),s&&(f.control[q]=s.processor(s.delegate||d,s.parts[2],s.parts[1],q,this)));return a.bind.call(d,
"removed",e),f.user.push(function(b){a.unbind.call(b,"removed",e)}),f.user.length}return"string"==typeof c&&(d=k,k=f,f=c,c=this.element),d===u&&(d=k,k=f,f=null),"string"==typeof d&&(d=a.Control._shifter(this,d)),this._bindings.user.push(b(c,k,d,f)),this._bindings.user.length},off:function(){var a=this.element[0],b=this._bindings;b&&(p(b.user||[],function(b){b(a)}),p(b.control||{},function(b){b(a)}));this._bindings={user:[],control:{}}},destroy:function(){if(null!==this.element){var b;b=this.constructor;
b=b.pluginName||b._fullName;this.off();b&&"can_control"!==b&&this.element.removeClass(b);b=a.data(this.element,"controls");b.splice(a.inArray(this,b),1);a.trigger(this,"destroyed");this.element=null}}}),s=a.Control.processors;return e=function(c,f,k,d,q){return b(c,f,a.Control._shifter(q,d),k)},p("change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave touchstart touchmove touchcancel touchend touchleave inserted removed".split(" "),
function(a){s[a]=e}),q}(z,Y),aa=function(a){return a.bindAndSetup=function(){return a.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},a.unbindAndTeardown=function(){return a.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings--,!this._bindings&&this._bindteardown&&this._bindteardown(),this},a}(z),P=function(a){var e=a.bubble={event:function(a,e){return a.constructor._bubbleRule(e,
a)},childrenOf:function(a,g){a._each(function(h,p){h&&h.bind&&e.toParent(h,a,p,g)})},teardownChildrenFrom:function(a,g){a._each(function(h){e.teardownFromParent(a,h,g)})},toParent:function(e,g,h,p){a.listenTo.call(g,e,p,function(){var n=a.makeArray(arguments),c=n.shift();n[0]=(a.List&&g instanceof a.List?g.indexOf(e):h)+(n[0]?"."+n[0]:"");c.triggeredNS=c.triggeredNS||{};c.triggeredNS[g._cid]||(c.triggeredNS[g._cid]=!0,a.trigger(g,c,n))})},teardownFromParent:function(e,g,h){g&&g.unbind&&a.stopListening.call(e,
g,h)},isBubbling:function(a,e){return a._bubbleBindings&&a._bubbleBindings[e]},bind:function(a,g){if(!a._init){var h=e.event(a,g);h&&(a._bubbleBindings||(a._bubbleBindings={}),a._bubbleBindings[h]?a._bubbleBindings[h]++:(a._bubbleBindings[h]=1,e.childrenOf(a,h)))}},unbind:function(m,g){var h=e.event(m,g);h&&(m._bubbleBindings&&m._bubbleBindings[h]--,m._bubbleBindings&&!m._bubbleBindings[h]&&(delete m._bubbleBindings[h],e.teardownChildrenFrom(m,h),a.isEmptyObject(m._bubbleBindings)&&delete m._bubbleBindings))},
add:function(m,g,h){if(g instanceof a.Map&&m._bubbleBindings)for(var p in m._bubbleBindings)m._bubbleBindings[p]&&(e.teardownFromParent(m,g,p),e.toParent(g,m,h,p))},removeMany:function(a,g){for(var h=0,p=g.length;p>h;h++)e.remove(a,g[h])},remove:function(m,g){if(g instanceof a.Map&&m._bubbleBindings)for(var h in m._bubbleBindings)m._bubbleBindings[h]&&e.teardownFromParent(m,g,h)},set:function(m,g,h,p){return a.Map.helpers.isObservable(h)&&e.add(m,h,g),a.Map.helpers.isObservable(p)&&e.remove(m,p),
h}};return e}(z),I=function(a){var e=1,m=0,g=[],h=[];a.batch={start:function(a){m++;a&&h.push(a)},stop:function(p,n){if(p?m=0:m--,0===m){var c,d,f=g.slice(0),b=h.slice(0);g=[];h=[];e++;n&&a.batch.start();c=0;for(d=f.length;d>c;c++)a.dispatch.apply(f[c][0],f[c][1]);for(c=0;c<b.length;c++)b[c]()}},trigger:function(p,n,c){if(!p._init){if(0===m)return a.dispatch.call(p,n,c);n="string"==typeof n?{type:n}:n;n.batchNum=e;g.push([p,[n,c]])}}}}(M),L=function(a,e,m){var g=null,h=function(){for(var a in g)g[a].added&&
delete g[a].obj._cid;g=null},p=null,n=a.Map=a.Construct.extend({setup:function(){if(a.Construct.setup.apply(this,arguments),a.Map){this.defaults||(this.defaults={});this._computes=[];for(var c in this.prototype)"define"!==c&&"function"!=typeof this.prototype[c]?this.defaults[c]=this.prototype[c]:this.prototype[c].isComputed&&this._computes.push(c);this.helpers.define&&this.helpers.define(this)}!a.List||this.prototype instanceof a.List||(this.List=n.List.extend({Map:this},{}))},_bubble:m,_bubbleRule:function(a){return("change"===
a||0<=a.indexOf("."))&&"change"},_computes:[],bind:a.bindAndSetup,on:a.bindAndSetup,unbind:a.unbindAndTeardown,off:a.unbindAndTeardown,id:"id",helpers:{define:null,attrParts:function(a,d){return d?[a]:"object"==typeof a?a:(""+a).split(".")},addToMap:function(c,d){var f;g||(f=h,g={});var b=c._cid,q=a.cid(c);return g[q]||(g[q]={obj:c,instance:d,added:!b}),f},isObservable:function(c){return c instanceof a.Map||c&&c===a.route},canMakeObserve:function(c){return c&&!a.isDeferred(c)&&(a.isArray(c)||a.isPlainObject(c))},
serialize:function(c,d,f){var b=a.cid(c),q=!1;return p||(q=!0,p={attr:{},serialize:{}}),p[d][b]=f,c.each(function(b,l){var r;r=(r=n.helpers.isObservable(b)&&p[d][a.cid(b)])?r:"serialize"===d?n.helpers._serialize(c,l,b):n.helpers._getValue(c,l,b,d);r!==u&&(f[l]=r)}),a.__reading(c,"__keys"),q&&(p=null),f},_serialize:function(a,d,f){return n.helpers._getValue(a,d,f,"serialize")},_getValue:function(a,d,f,b){return n.helpers.isObservable(f)?f[b]():f}},keys:function(c){var d=[];a.__reading(c,"__keys");
for(var f in c._data)d.push(f);return d}},{setup:function(c){this._data={};a.cid(this,".map");this._init=1;var d=this._setupDefaults();this._setupComputes(d);var f=c&&a.Map.helpers.addToMap(c,this);c=a.extend(a.extend(!0,{},d),c);this.attr(c);f&&f();this.bind("change",a.proxy(this._changes,this));delete this._init},_setupComputes:function(){var a=this.constructor._computes;this._computedBindings={};for(var d,f=0,b=a.length;b>f;f++)d=a[f],this[d]=this[d].clone(this),this._computedBindings[d]={count:0}},
_setupDefaults:function(){return this.constructor.defaults||{}},_bindsetup:function(){},_bindteardown:function(){},_changes:function(c,d,f,b,q){a.batch.trigger(this,{type:d,batchNum:c.batchNum,target:c.target},[b,q])},_triggerChange:function(c,d,f,b){m.isBubbling(this,"change")?a.batch.trigger(this,{type:"change",target:this},[c,d,f,b]):a.batch.trigger(this,c,[f,b]);"remove"!==d&&"add"!==d||a.batch.trigger(this,{type:"__keys",target:this})},_each:function(a){var d=this.__get(),f;for(f in d)d.hasOwnProperty(f)&&
a(d[f],f)},attr:function(c,d){var f=typeof c;return"string"!==f&&"number"!==f?this._attrs(c,d):1===arguments.length?(a.__reading(this,c),this._get(c)):(this._set(c,d),this)},each:function(){return a.each.apply(u,[this].concat(a.makeArray(arguments)))},removeAttr:function(c){var d=a.List&&this instanceof a.List,f=a.Map.helpers.attrParts(c),b=f.shift(),d=d?this[b]:this._data[b];return f.length&&d?d.removeAttr(f):("string"==typeof c&&~c.indexOf(".")&&(b=c),this._remove(b,d),d)},_remove:function(a,d){a in
this._data&&(delete this._data[a],a in this.constructor.prototype||delete this[a],this._triggerChange(a,"remove",u,d))},_get:function(a){a=""+a;var d=a.indexOf(".");if(0<=d){var f=this.__get(a);if(f!==u)return f;f=a.substr(0,d);a=a.substr(d+1);return(d=this.__get(f))&&d._get?d._get(a):u}return this.__get(a)},__get:function(a){return a?this._computedBindings[a]?this[a]():this._data[a]:this._data},__type:function(c){if(!(c instanceof a.Map)&&a.Map.helpers.canMakeObserve(c)){var d=g&&g[c._cid]&&g[c._cid].instance;
return d?d:a.isArray(c)?new a.List(c):new (this.constructor.Map||a.Map)(c)}return c},_set:function(a,d,f){a=""+a;var b,q=a.indexOf(".");if(!f&&0<=q){f=a.substr(0,q);a=a.substr(q+1);if(b=this._init?u:this.__get(f),!n.helpers.isObservable(b))throw"can.Map: Object does not exist";b._set(a,d)}else this.__convert&&(d=this.__convert(a,d)),b=this._init?u:this.__get(a),this.__set(a,this.__type(d,a),b)},__set:function(a,d,f){if(d!==f){var b=f!==u||this.__get().hasOwnProperty(a)?"set":"add";this.___set(a,this.constructor._bubble.set(this,
a,d,f));this._triggerChange(a,b,d,f);f&&this.constructor._bubble.teardownFromParent(this,f)}},___set:function(a,d){this._computedBindings[a]?this[a](d):this._data[a]=d;"function"==typeof this.constructor.prototype[a]||this._computedBindings[a]||(this[a]=d)},bind:function(c){var d=this._computedBindings&&this._computedBindings[c];if(d)if(d.count)d.count++;else{d.count=1;var f=this;d.handler=function(b,d,e){a.batch.trigger(f,{type:c,batchNum:b.batchNum,target:f},[d,e])};this[c].bind("change",d.handler)}return this.constructor._bubble.bind(this,
c),a.bindAndSetup.apply(this,arguments)},unbind:function(c){var d=this._computedBindings&&this._computedBindings[c];return d&&(1===d.count?(d.count=0,this[c].unbind("change",d.handler),delete d.handler):d.count--),this.constructor._bubble.unbind(this,c),a.unbindAndTeardown.apply(this,arguments)},serialize:function(){return a.Map.helpers.serialize(this,"serialize",{})},_attrs:function(c,d){if(c===u)return n.helpers.serialize(this,"attr",{});c=a.simpleExtend({},c);var f,b,q=this;a.batch.start();this.each(function(a,
l){if("_cid"!==l){if(b=c[l],b===u)return void(d&&q.removeAttr(l));q.__convert&&(b=q.__convert(l,b));n.helpers.isObservable(b)?q.__set(l,q.__type(b,l),a):n.helpers.isObservable(a)&&n.helpers.canMakeObserve(b)?a.attr(b,d):a!==b&&q.__set(l,q.__type(b,l),a);delete c[l]}});for(f in c)"_cid"!==f&&(b=c[f],this._set(f,b,!0));return a.batch.stop(),this},compute:function(c){if(a.isFunction(this.constructor.prototype[c]))return a.compute(this[c],this);var d=c.split("."),f=d.length-1,b={args:[]};return a.compute(function(c){return arguments.length?
void a.compute.read(this,d.slice(0,f)).value.attr(d[f],c):a.compute.read(this,d,b).value},this)}});return n.prototype.on=n.prototype.bind,n.prototype.off=n.prototype.unbind,n}(z,aa,P,Y,I),P=function(a,e,m){var g=[].splice,h=function(){var a={0:"a",length:1};return g.call(a,0,1),!a[0]}(),p=e.extend({Map:e},{setup:function(e,c){this.length=0;a.cid(this,".map");this._init=1;this._setupComputes();e=e||[];var d;a.isDeferred(e)?this.replace(e):(d=e.length&&a.Map.helpers.addToMap(e,this),this.push.apply(this,
a.makeArray(e||[])));d&&d();this.bind("change",a.proxy(this._changes,this));a.simpleExtend(this,c);delete this._init},_triggerChange:function(n,c,d,f){e.prototype._triggerChange.apply(this,arguments);var b=+n;~n.indexOf(".")||isNaN(b)||("add"===c?(a.batch.trigger(this,c,[d,b]),a.batch.trigger(this,"length",[this.length])):"remove"===c?(a.batch.trigger(this,c,[f,b]),a.batch.trigger(this,"length",[this.length])):a.batch.trigger(this,c,[d,b]))},__get:function(e){return e?this[e]&&this[e].isComputed&&
a.isFunction(this.constructor.prototype[e])?this[e]():this[e]:this},___set:function(a,c){this[a]=c;+a>=this.length&&(this.length=+a+1)},_remove:function(a,c){isNaN(+a)?(delete this[a],this._triggerChange(a,"remove",u,c)):this.splice(a,1)},_each:function(a){for(var c=this.__get(),d=0;d<c.length;d++)a(c[d],d)},serialize:function(){return e.helpers.serialize(this,"serialize",[])},splice:function(e,c){var d,f=a.makeArray(arguments),b=[];for(d=2;d<f.length;d++)f[d]=m.set(this,d,this.__type(f[d],d)),b.push(f[d]);
c===u&&(c=f[1]=this.length-e);var q=g.apply(this,f),s=q;if(b.length&&q.length)for(d=0;d<q.length;d++)0<=a.inArray(q[d],b)&&s.splice(d,1);if(!h)for(d=this.length;d<q.length+this.length;d++)delete this[d];return a.batch.start(),0<c&&(this._triggerChange(""+e,"remove",u,q),m.removeMany(this,q)),2<f.length&&this._triggerChange(""+e,"add",f.slice(2),q),a.batch.stop(),q},_attrs:function(g,c){return g===u?e.helpers.serialize(this,"attr",[]):(g=a.makeArray(g),a.batch.start(),this._updateAttrs(g,c),void a.batch.stop())},
_updateAttrs:function(a,c){for(var d=Math.min(a.length,this.length),f=0;d>f;f++){var b=this[f],q=a[f];e.helpers.isObservable(b)&&e.helpers.canMakeObserve(q)?b.attr(q,c):b!==q&&this._set(f,q)}a.length>this.length?this.push.apply(this,a.slice(this.length)):a.length<this.length&&c&&this.splice(a.length)}});return a.each({push:"length",unshift:0},function(a,c){var d=[][c];p.prototype[c]=function(){for(var c,b,e=[],s=a?this.length:0,l=arguments.length;l--;)b=arguments[l],e[l]=m.set(this,l,this.__type(b,
l));return c=d.apply(this,e),(!this.comparator||e.length)&&this._triggerChange(""+s,"add",e,u),c}}),a.each({pop:"length",shift:0},function(e,c){p.prototype[c]=function(){var d,f=arguments;d=f[0]&&a.isArray(f[0])?f[0]:a.makeArray(f);f=e&&this.length?this.length-1:0;d=[][c].apply(this,d);return this._triggerChange(""+f,"remove",u,[d]),d&&d.unbind&&m.remove(this,d),d}}),a.extend(p.prototype,{indexOf:function(e,c){return this.attr("length"),a.inArray(e,this,c)},join:function(){return[].join.apply(this.attr(),
arguments)},reverse:function(){var e=a.makeArray([].reverse.call(this));this.replace(e)},slice:function(){var a=Array.prototype.slice.apply(this,arguments);return new this.constructor(a)},concat:function(){var e=[];return a.each(a.makeArray(arguments),function(c,d){e[d]=c instanceof a.List?c.serialize():c}),new this.constructor(Array.prototype.concat.apply(this.serialize(),e))},forEach:function(e,c){return a.each(this,e,c||this)},replace:function(e){return a.isDeferred(e)?e.then(a.proxy(this.replace,
this)):this.splice.apply(this,[0,this.length].concat(a.makeArray(e||[]))),this},filter:function(e,c){var d,f=new a.List,b=this;return this.each(function(a,s){(d=e.call(c|b,a,s,b))&&f.push(a)}),f}}),a.List=e.List=p,a.List}(z,L,P),I=function(a){var e=[];a.__read=function(a,b){e.push({});return{value:a.call(b),observed:e.pop()}};a.__reading=function(a,b){e.length&&(e[e.length-1][a._cid+"|"+b]={obj:a,event:b+""})};a.__clearReading=function(){if(e.length){var a=e[e.length-1];return e[e.length-1]={},a}};
a.__setReading=function(a){e.length&&(e[e.length-1]=a)};a.__addReading=function(c){e.length&&a.simpleExtend(e[e.length-1],c)};var m=function(c,b,d,e){c=a.__read(c,b);b=c.observed;for(var l in b){var r=b,k=l,g=e;d[k]?delete d[k]:(r=r[k],r.obj.bind(r.event,g))}for(var A in d)l=d[A],l.obj.unbind(l.event,e);return c},g=function(c,b,d,e){b!==d&&a.batch.trigger(c,e?{type:"change",batchNum:e}:"change",[b,d])},h=function(c,b,d,e){var l,r,k;return{on:function(g){r||(r=function(a){if(c.bound&&(a.batchNum===
u||a.batchNum!==k)){var e=l.value;l=m(b,d,l.observed,r);g(l.value,e,a.batchNum);k=k=a.batchNum}});l=m(b,d,{},r);e(l.value);c.hasDependencies=!a.isEmptyObject(l.observed)},off:function(){for(var a in l.observed){var b=l.observed[a];b.obj.unbind(b.event,r)}}}},p=function(c,b,d,e){var l,r,k,g;return{on:function(A){k||(k=function(a){if(c.bound&&(a.batchNum===u||a.batchNum!==g)){var l=b.call(d);A(l,r,a.batchNum);r=l;g=g=a.batchNum}});l=m(b,d,{},k);r=l.value;e(l.value);c.hasDependencies=!a.isEmptyObject(l.observed)},
off:function(){for(var a in l.observed){var b=l.observed[a];b.obj.unbind(b.event,k)}}}},n=function(){};a.compute=function(c,b,d,s){if(c&&c.isComputed)return c;for(var l,r,k,v=n,A=n,x=function(){return r},m=function(a){r=a},w=m,C=[],B=function(a,b,c){w(a);g(l,a,b,c)},y=0,E=arguments.length;E>y;y++)C[y]=arguments[y];if(l=function(c){if(arguments.length){var k=r,f=m.call(b,c,k);return l.hasDependencies?x.call(b):(r=f===u?x.call(b):f,g(l,r,k),r)}return e.length&&!1!==l.canReadForChangeEvent&&(a.__reading(l,
"change"),l.bound||a.compute.temporarilyBind(l)),l.bound?r:x.call(b)},"function"==typeof c){x=m=c;l.canReadForChangeEvent=!1===d?!1:!0;var N=s?p(l,c,b||this,w):h(l,c,b||this,w),v=N.on,A=N.off}else if(b)if("string"==typeof b){var t=b;if(c instanceof a.Map){l.hasDependencies=!0;var D,x=function(){return c.attr(t)},m=function(a){c.attr(t,a)},v=function(b){D=function(a,c,l){b(c,l,a.batchNum)};c.bind(d||t,D);r=a.__read(x).value},A=function(){c.unbind(d||t,D)}}else x=function(){return c[t]},m=function(a){c[t]=
a},v=function(b){D=function(){b(x(),r)};a.bind.call(c,d||t,D);r=a.__read(x).value},A=function(){a.unbind.call(c,d||t,D)}}else if("function"==typeof b)r=c,m=b,b=d,k="setter";else{r=c;var y=b,J=B;if(b=y.context||y,x=y.get||x,m=y.set||function(){return r},y.fn){var Q=y.fn,x=function(){return Q.call(b,r)};0===Q.length?N=h(l,Q,b,w):1===Q.length?N=h(l,function(){return Q.call(b,r)},b,w):(B=function(a){a!==u&&J(a,r)},N=h(l,function(){var a=Q.call(b,r,function(a){J(a,r)});return a!==u?a:r},b,w));v=N.on;A=
N.off}else B=function(){var a=x.call(b);J(a,r)};v=y.on||v;A=y.off||A}else r=c;return a.cid(l,"compute"),a.simpleExtend(l,{isComputed:!0,_bindsetup:function(){this.bound=!0;var b=a.__clearReading();v.call(this,B);a.__setReading(b)},_bindteardown:function(){A.call(this,B);this.bound=!1},bind:a.bindAndSetup,unbind:a.unbindAndTeardown,clone:function(b){return b&&("setter"===k?C[2]=b:C[1]=b),a.compute.apply(a,C)}})};var c,d=function(){for(var a=0,b=c.length;b>a;a++)c[a].unbind("change",n);c=null};return a.compute.temporarilyBind=
function(a){a.bind("change",n);c||(c=[],setTimeout(d,10));c.push(a)},a.compute.truthy=function(c){return a.compute(function(){var a=c();return"function"==typeof a&&(a=a()),!!a})},a.compute.async=function(c,b,d){return a.compute(c,{fn:b,context:d})},a.compute.read=function(c,b,d){d=d||{};for(var e,l,r,k=0,g=b.length;g>k;k++)if(l=c,l&&l.isComputed&&(d.foundObservable&&d.foundObservable(l,k),l=l()),l instanceof a.Map||l&&l.__get?(!r&&d.foundObservable&&d.foundObservable(l,k),r=1,c="function"==typeof l[b[k]]&&
l.constructor.prototype[b[k]]===l[b[k]]?d.returnObserveMethods?c[b[k]]:"constructor"===b[k]&&l instanceof a.Construct?l[b[k]]:l[b[k]].apply(l,d.args||[]):c.attr(b[k])):c=l[b[k]],e=typeof c,c&&c.isComputed&&!d.isArgument&&g-1>k?(!r&&d.foundObservable&&d.foundObservable(l,k+1),c=c()):k<b.length-1&&"function"===e&&d.executeAnonymousFunctions&&!(a.Construct&&c.prototype instanceof a.Construct)&&(c=c()),k<b.length-1&&(null===c||"function"!==e&&"object"!==e))return d.earlyExit&&d.earlyExit(l,k,c),{value:u,
parent:l};return"function"!=typeof c||a.Construct&&c.prototype instanceof a.Construct||(d.isArgument?c.isComputed||!1===d.proxyMethods||(c=a.proxy(c,l)):(c.isComputed&&!r&&d.foundObservable&&d.foundObservable(c,k),c=c.call(l))),c===u&&d.earlyExit&&d.earlyExit(l,k-1),{value:c,parent:l}},a.compute}(z,aa,I),aa=function(a){return a.Observe=a.Map,a.Observe.startBatch=a.batch.start,a.Observe.stopBatch=a.batch.stop,a.Observe.triggerBatch=a.batch.trigger,a}(z,L,P,I),Y=function(a){var e=/(\\)?\./g,m=/\\\./g,
g=function(a){var g=[],c=0;return a.replace(e,function(d,e,b){e||(g.push(a.slice(c,b).replace(m,".")),c=b+d.length)}),g.push(a.slice(c).replace(m,".")),g},h=a.Construct.extend({read:a.compute.read},{init:function(a,e){this._context=a;this._parent=e;this.__cache={}},attr:function(e){var g=a.__clearReading();e=this.read(e,{isArgument:!0,returnObserveMethods:!0,proxyMethods:!1}).value;return a.__setReading(g),e},add:function(a){return a!==this._context?new this.constructor(a,this):this},computeData:function(e,
g){g=g||{args:[]};var c,d,f=this,b={compute:a.compute(function(q){if(!arguments.length){if(c)return a.compute.read(c,d,g).value;var s=f.read(e,g);return c=s.rootObserve,d=s.reads,b.scope=s.scope,b.initialValue=s.value,b.reads=s.reads,b.root=c,s.value}c.isComputed&&!d.length?c(q):(s=d.length-1,a.compute.read(c,d.slice(0,s)).value.attr(d[s],q))})};return b},compute:function(a,e){return this.computeData(a,e).compute},read:function(e,n){var c;if("./"===e.substr(0,2))c=!0,e=e.substr(2);else{if("../"===
e.substr(0,3))return this._parent.read(e.substr(3),n);if(".."===e)return{value:this._parent._context};if("."===e||"this"===e)return{value:this._context}}for(var d,f,b,q,s,l,r=-1===e.indexOf("\\.")?e.split("."):g(e),k=this,v=[],A=-1;k;){if(d=k._context,null!==d){var x=a.compute.read(d,r,a.simpleExtend({foundObservable:function(a,b){s=a;l=r.slice(b)},earlyExit:function(c,d){d>A&&(f=s,v=l,A=d,q=k,b=a.__clearReading())},executeAnonymousFunctions:!0},n));if(x.value!==u)return{scope:k,rootObserve:s,value:x.value,
reads:l}}a.__clearReading();k=c?null:k._parent}return f?(a.__setReading(b),{scope:q,rootObserve:f,reads:v,value:u}):{names:r,value:u}}});return a.view.Scope=h,h}(z,Y,L,P,K,I),W=function(a){var e=1===a.$(document.createComment("~")).length,m={tagToContentPropMap:{option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:a.attr.map,attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:a.attr.defaultValue,tagMap:{"":"span",colgroup:"col",table:"tbody",tr:"td",
ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{col:"colgroup",tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(a,e){return e&&11===a.parentNode.nodeType?e:a.parentNode},setAttr:a.attr.set,getAttr:a.attr.get,removeAttr:a.attr.remove,contentText:function(a){return"string"==typeof a?a:a||0===a?""+a:""},after:function(e,m){var p=e[e.length-1];p.nextSibling?a.insertBefore(p.parentNode,m,p.nextSibling):a.appendChild(p.parentNode,
m)},replace:function(g,h){m.after(g,h);a.remove(a.$(g)).length<g.length&&!e&&a.each(g,function(a){8===a.nodeType&&a.parentNode.removeChild(a)})}};return a.view.elements=m,m}(z,K),ea=function(a,e,m){var g=/(\r|\n)+/g,h=/\//,p=function(a){return a.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("\t").join("\\t")},n=function(a,b,c){if(a)return a;for(;c<b.length;){if("<"===b[c]&&!h.test(b[c+1]))return e.reverseTagMap[b[c+1]]||"span";c++}return""},c=function(a){return--a.split("{").length-
--a.split("}").length},d=function(a){eval(a)},f=/([^\s]+)[\s]*=[\s]*$/,b=null,q=null,s=null,l=null,r=function(){var a=s.match(f);return a&&a[1]},k=function(){return q?"'"+r()+"'":b?1:0},v;return a.view.Scanner=v=function(b){a.extend(this,{text:{},tokens:[]},b);this.text.options=this.text.options||"";this.tokenReg=[];this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"};this.tokenComplex=[];this.tokenMap={};for(var c=0;b=this.tokens[c];c++)b[2]?(this.tokenReg.push(b[2]),this.tokenComplex.push({abbr:b[1],
re:new RegExp(b[2]),rescan:b[3]})):(this.tokenReg.push(b[1]),this.tokenSimple[b[1]]=b[0]),this.tokenMap[b[0]]=b[1];this.tokenReg=new RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},v.prototype={helpers:[],scan:function(a,v){var h=[],w=0,C=this.tokenSimple,B=this.tokenComplex;a=a.replace(g,"\n");this.transform&&(a=this.transform(a));a.replace(this.tokenReg,function(b,c){var l=arguments[arguments.length-2];if(l>w&&h.push(a.substring(w,l)),C[b])h.push(b);else for(var k,
d=0;k=B[d];d++)if(k.re.test(b)){h.push(k.abbr);k.rescan&&h.push(k.rescan(c));break}w=l+c.length});w<a.length&&h.push(a.substr(w));var y,E,N,t="",D=["var ___v1ew = [];"+(this.text.start||"")],J=function(a,b){D.push("___v1ew.push(\n",'"',p(a),'"'+(b||"")+");")},Q=[],z=null,U=!1,Z=[],V=[],K="",L=function(){K=V.pop()+V.length},F="",O=[],ba=!1,I=!1,S=0,G=this.tokenMap;for(b=q=s=null;(E=h[S++])!==u;){if(null===z)switch(E){case G.left:case G.escapeLeft:case G.returnLeft:U=b&&1;case G.commentLeft:z=E;t.length&&
J(t);t="";break;case G.escapeFull:U=b&&1;l=1;z=G.escapeLeft;t.length&&J(t);l=h[S++];t=l.content||l;l.before&&J(l.before);h.splice(S,0,G.right);break;case G.commentFull:break;case G.templateLeft:t+=G.left;break;case "<":0!==h[S].indexOf("!--")&&(b=1,U=0);t+=E;break;case ">":b=0;y="/"===t.substr(t.length-1)||"--"===t.substr(t.length-2);var T="";(Z.length&&(T="attrs: ['"+Z.join("','")+"'], ",Z=[]),F+V.length!==K&&F===V[V.length-1])?(y&&(t=t.substr(0,t.length-1)),D.push("___v1ew.push(\n",'"',p(t),'"',
",can.view.pending({tagName:'"+F+"',"+T+"scope: "+(this.text.scope||"this")+this.text.options),y?(D.push("}));"),t="/>",L()):"<"===h[S]&&h[S+1]==="/"+F?(D.push("}));"),t=E,L()):(D.push(",subtemplate: function("+this.text.argNames+"){\nvar ___v1ew = [];"+(this.text.start||"")),t="")):U||!ba&&e.tagToContentPropMap[O[O.length-1]]||T?(U=",can.view.pending({"+T+"scope: "+(this.text.scope||"this")+this.text.options+'}),"',y?J(t.substr(0,t.length-1),U+'/>"'):J(t,U+'>"'),t="",U=0):t+=E;(y||ba)&&(O.pop(),
F=O[O.length-1],ba=!1);Z=[];break;case "'":case '"':if(b)if(q&&q===E){if(q=null,T=r(),m.attr(T)&&Z.push(T),I){t+=E;J(t);D.push("return ___v1ew.join('')","}));\n");t="";I=!1;break}}else if(null===q&&(q=E,s=y,N=r(),"img"===F&&"src"===N||"style"===N)){J(t.replace(f,""));t="";I=!0;D.push("___v1ew.push(\n","can.view.txt(2,'"+n(F,h,S)+"',"+k()+",this,function(){","var ___v1ew = [];");J(N+"="+E);break}default:if("<"===y){var F="!--"===E.substr(0,3)?"!--":E.split(/\s/)[0],M;y=!1;0===F.indexOf("/")&&(y=!0,
M=F.substr(1));y?(O[O.length-1]===M&&(F=M,ba=!0),V[V.length-1]===M&&(J(t.substr(0,t.length-1)),D.push("return ___v1ew.join('')}}) );"),t="><",L())):(F.lastIndexOf("/")===F.length-1&&(F=F.substr(0,F.length-1)),"!--"!==F&&m.tag(F)&&("content"===F&&e.tagMap[O[O.length-1]]&&(E=E.replace("content",e.tagMap[O[O.length-1]])),V.push(F)),O.push(F))}t+=E}else switch(E){case G.right:case G.returnRight:switch(z){case G.left:y=c(t);1===y?(D.push("___v1ew.push(\n","can.view.txt(0,'"+n(F,h,S)+"',"+k()+",this,function(){",
"var ___v1ew = [];",t),Q.push({before:"",after:"return ___v1ew.join('')}));\n"})):(w=Q.length&&-1===y?Q.pop():{after:";"},w.before&&D.push(w.before),D.push(t,";",w.after));break;case G.escapeLeft:case G.returnLeft:(y=c(t))&&Q.push({before:"return ___v1ew.join('')",after:"}));\n"});for(var z=z===G.escapeLeft?1:0,T={insert:"___v1ew.push(\n",tagName:n(F,h,S),status:k(),specialAttribute:I},P=0;P<this.helpers.length;P++){var R=this.helpers[P];if(R.name.test(t)){t=R.fn(t,T);R.name.source===/^>[\s]*\w*/.source&&
(z=0);break}}"object"==typeof t?t.startTxt&&t.end&&I?D.push("___v1ew.push(\n","can.view.toStr( ",t.content,"() ) );"):(t.startTxt?D.push("___v1ew.push(\n","can.view.txt(\n"+("string"==typeof k()||(null!=t.escaped?t.escaped:z))+",\n'"+F+"',\n"+k()+",\nthis,\n"):t.startOnlyTxt&&D.push("___v1ew.push(\n","can.view.onlytxt(this,\n"),D.push(t.content),t.end&&D.push("));")):I?D.push("___v1ew.push(\n",t,");"):D.push("___v1ew.push(\n","can.view.txt(\n"+("string"==typeof k()||z)+",\n'"+F+"',\n"+k()+",\nthis,\nfunction(){ "+
(this.text.escape||"")+"return ",t,y?"var ___v1ew = [];":"}));\n");l&&l.after&&l.after.length&&(J(l.after.length),l=null)}z=null;t="";break;case G.templateLeft:t+=G.left;break;default:t+=E}y=E}t.length&&J(t);D.push(";");E=D.join("");E={out:(this.text.outStart||"")+E+" return ___v1ew.join('')"+(this.text.outEnd||"")};return d.call(E,"this.fn = (function("+this.text.argNames+"){"+E.out+"});\r\n//# sourceURL="+v+".js"),E}},a.view.pending=function(b){var c=a.view.getHooks();return a.view.hook(function(l){a.each(c,
function(a){a(l)});b.templateType="legacy";b.tagName&&m.tagHandler(l,b.tagName,b);a.each(b&&b.attrs||[],function(a){b.attributeName=a;(a=m.attr(a))&&a(l,b)})})},a.view.tag("content",function(a,b){return b.scope}),a.view.Scanner=v,v}(K,W,R),da=function(a){var e=!0;try{document.createTextNode("")._=0}catch(m){e=!1}var g={},h={},p="ejs_"+Math.random(),n=0,c=function(a,b){var c=b||h,f=d(a,c);return f?f:e||3!==a.nodeType?(++n,a[p]=(a.nodeName?"element_":"obj_")+n):(++n,c["text_"+n]=a,"text_"+n)},d=function(a,
b){if(e||3!==a.nodeType)return a[p];for(var c in b)if(b[c]===a)return c},f=[].splice,b=[].push,q=function(a){for(var b=0,c=0,d=a.length;d>c;c++){var e=a[c];e.nodeType?b++:b+=q(e)}return b},s={id:c,update:function(b,c){var k=s.unregisterChildren(b);c=a.makeArray(c);return f.apply(b,[0,b.length].concat(c)),b.replacements?s.nestReplacements(b):s.nestList(b),k},nestReplacements:function(a){for(var b=0,k={},e=a.replacements,f={},g=0,n=e.length;n>g;g++){var h=s.first(e[g]);f[c(h,k)]=e[g]}for(e=a.replacements.length;b<
a.length&&e;)(g=f[d(a[b],k)])&&(a.splice(b,q(g),g),e--),b++;a.replacements=[]},nestList:function(a){for(var b=0;b<a.length;){var k=a[b],d=g[c(k)];d?d!==a&&a.splice(b,q(d),d):g[c(k)]=a;b++}},last:function(a){a=a[a.length-1];return a.nodeType?a:s.last(a)},first:function(a){a=a[0];return a.nodeType?a:s.first(a)},register:function(a,b,c){return a.unregistered=b,a.parentList=c,!0===c?a.replacements=[]:c?(c.replacements.push(a),a.replacements=[]):s.nestList(a),a},unregisterChildren:function(l){var d=[];
return a.each(l,function(a){a.nodeType?(l.replacements||delete g[c(a)],d.push(a)):b.apply(d,s.unregister(a))}),d},unregister:function(a){var b=s.unregisterChildren(a);if(a.unregistered){var c=a.unregistered;delete a.unregistered;delete a.replacements;c()}return b},nodeMap:g};return a.view.nodeLists=s,s}(z,W),fa=function(a){function e(a){var b={};a=a.split(",");for(var c=0;c<a.length;c++)b[a[c]]=!0;return b}var m=/^<([-A-Za-z0-9_]+)((?:\s*(?:(?:(?:[a-zA-Z_:][-A-Za-z0-9_:.]+)?(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)|(?:\{\{[^\}]*\}\}\}?)+))*)\s*(\/?)>/,
g=/^<\/([-A-Za-z0-9_]+)[^>]*>/,h=RegExp("(?:(?:([a-zA-Z_:][-A-Za-z0-9_:.]+)|\\{\\{([^\\}]*)\\}\\}\\}?)(?:\\s*=\\s*(?:(?:\"((?:\\\\.|[^\"])*)\")|(?:'((?:\\\\.|[^'])*)')|([^>\\s]+)))?)","g"),p=RegExp("\\{\\{([^\\}]*)\\}\\}\\}?","g"),n=/<|\{\{/,c=e("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed"),d=e("address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),
f=e("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),b=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),q=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),s=e("script,style"),l=function(a,k){function e(a,r,g,s){if(r=r.toLowerCase(),d[r])for(;B.last()&&f[B.last()];)q("",B.last());b[r]&&B.last()===
r&&q("",r);s=c[r]||!!s;k.start(r,s);s||B.push(r);l.parseAttrs(g,k);k.end(r,s)}function q(a,b){var c;if(b)for(c=B.length-1;0<=c&&B[c]!==b;c--);else c=0;if(0<=c){for(var d=B.length-1;d>=c;d--)k.close&&k.close(B[d]);B.length=c}}function h(a,b){k.special&&k.special(b)}var H,w,C,B=[],y=a;for(B.last=function(){return this[this.length-1]};a;){if(w=!0,B.last()&&s[B.last()])a=a.replace(new RegExp("([\\s\\S]*?)</"+B.last()+"[^>]*>"),function(a,b){return b=b.replace(/\x3c!--([\s\S]*?)--\x3e|<!\[CDATA\[([\s\S]*?)]]\x3e/g,
"$1$2"),k.chars&&k.chars(b),""}),q("",B.last());else if(0===a.indexOf("\x3c!--")?(H=a.indexOf("--\x3e"),0<=H&&(k.comment&&k.comment(a.substring(4,H)),a=a.substring(H+3),w=!1)):0===a.indexOf("</")?(C=a.match(g),C&&(a=a.substring(C[0].length),C[0].replace(g,q),w=!1)):0===a.indexOf("<")?(C=a.match(m),C&&(a=a.substring(C[0].length),C[0].replace(m,e),w=!1)):0===a.indexOf("{{")&&(C=a.match(p),C&&(a=a.substring(C[0].length),C[0].replace(p,h))),w)H=a.search(n),w=0>H?a:a.substring(0,H),a=0>H?"":a.substring(H),
k.chars&&w&&k.chars(w);if(a===y)throw"Parse Error: "+a;y=a}q();k.done()};return l.parseAttrs=function(a,b){(null!=a?a:"").replace(h,function(a,c,d,e,l,f){if(d&&b.special(d),c||e||l||f){a=e?e:l?l:f?f:q[c.toLowerCase()]?c:"";b.attrStart(c||"");e=p.lastIndex=0;for(d=p.exec(a);d;)e=a.substring(e,p.lastIndex-d[0].length),e.length&&b.attrValue(e),b.special(d[1]),e=p.lastIndex,d=p.exec(a);(e=a.substr(e,a.length))&&b.attrValue(e);b.attrEnd(c||"")}})},a.view.parser=l,l}(K),da=function(a,e,m,g,h){e=e||a.view.elements;
g=g||a.view.NodeLists;h=h||a.view.parser;var p=function(b,c,d){var e=!1,f=function(){return e||(e=!0,d(g),a.unbind.call(b,"removed",f)),!0},g={teardownCheck:function(a){return a?!1:f()}};return a.bind.call(b,"removed",f),c(g),g},n=function(a,b,c){return p(a,function(){b.bind("change",c)},function(a){b.unbind("change",c);a.nodeList&&g.unregister(a.nodeList)})},c=function(a){var b,c={};return h.parseAttrs(a,{attrStart:function(a){c[a]="";b=a},attrValue:function(a){c[b]+=a},attrEnd:function(){}}),c},
d=[].splice,f={list:function(b,c,r,k,q,n){var h,m=n||[b],w=[],C=function(b,c,l){var f=document.createDocumentFragment(),s=[],q=[];a.each(c,function(b,c){var d=[];n&&g.register(d,null,!0);var e=a.compute(c+l),h=r.call(k,b,e,d),m="string"==typeof h,h=a.frag(h),h=m?a.view.hookup(h):h,m=a.makeArray(h.childNodes);n?(g.update(d,m),s.push(d)):s.push(g.register(m));f.appendChild(h);q.push(e)});b=l+1;m[b]?(c=g.first(m[b]),a.insertBefore(c.parentNode,f,c)):e.after(1===b?[y]:[g.last(m[b-1])],f);d.apply(m,[b,
0].concat(s));d.apply(w,[l,0].concat(q));b=l+q.length;for(c=w.length;c>b;b++)w[b](b)},B=function(b,c,d,e,k){if(e||!t.teardownCheck(y.parentNode)){b=m.splice(d+1,c.length);var l=[];a.each(b,function(a){a=g.unregister(a);[].push.apply(l,a)});w.splice(d,c.length);c=d;for(d=w.length;d>c;c++)w[c](c);k||a.remove(a.$(l))}},y=document.createTextNode(""),u=function(a){h&&h.unbind&&h.unbind("add",C).unbind("remove",B);B({},{length:m.length-1},0,!0,a)},z=function(a,b){u();h=b||[];h.bind&&h.bind("add",C).bind("remove",
B);C({},h,0)};q=e.getParentNode(b,q);var t=p(q,function(){a.isFunction(c)&&c.bind("change",z)},function(){a.isFunction(c)&&c.unbind("change",z);u(!0)});n?(e.replace(m,y),g.update(m,[y]),n.unregistered=t.teardownCheck):f.replace(m,y,t.teardownCheck);z({},a.isFunction(c)?c():c)},html:function(b,c,d,k){var f;d=e.getParentNode(b,d);f=n(d,c,function(a,b){g.first(q).parentNode&&h(b);f.teardownCheck(g.first(q).parentNode)});var q=k||[b],h=function(b){var c=!(b&&b.nodeType);b=a.frag(b);var k=a.makeArray(q);
b.childNodes.length||b.appendChild(document.createTextNode(""));c&&(b=a.view.hookup(b,d));k=g.update(q,b.childNodes);e.replace(k,b)};f.nodeList=q;k?k.unregistered=f.teardownCheck:g.register(q,f.teardownCheck);h(c())},replace:function(b,c,d){var k=b.slice(0),f=a.frag(c);return g.register(b,d),"string"==typeof c&&(f=a.view.hookup(f,b[0].parentNode)),g.update(b,f.childNodes),e.replace(k,f),b},text:function(b,c,d,k){d=e.getParentNode(b,d);var q=n(d,c,function(b,c){"unknown"!=typeof h.nodeValue&&(h.nodeValue=
a.view.toStr(c));q.teardownCheck(h.parentNode)}),h=document.createTextNode(a.view.toStr(c()));k?(k.unregistered=q.teardownCheck,q.nodeList=k,g.update(k,[h]),e.replace([b],h)):q.nodeList=f.replace([b],h,q.teardownCheck)},setAttributes:function(b,d){var e=c(d),k;for(k in e)a.attr.set(b,k,e[k])},attributes:function(b,d,f){var k={},g=function(d){var l;d=c(d);for(l in d){var f=d[l];f!==k[l]&&a.attr.set(b,l,f);delete k[l]}for(l in k)e.removeAttr(b,l);k=d};n(b,d,function(a,b){g(b)});3<=arguments.length?
k=c(f):g(d())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(b,c,d){n(b,d,function(){e.setAttr(b,c,q.render())});var k,g=a.$(b);(k=a.data(g,"hooks"))||a.data(g,"hooks",k={});var q,h=e.getAttr(b,c),g=h.split(f.attributePlaceholder),m=[];m.push(g.shift(),g.join(f.attributePlaceholder));k[c]?k[c].computes.push(d):k[c]={render:function(){var a=0;return h?h.replace(f.attributeReplace,function(){return e.contentText(q.computes[a++]())}):e.contentText(q.computes[a++]())},computes:[d],
batchNum:u};q=k[c];m.splice(1,0,d());e.setAttr(b,c,m.join(""))},specialAttribute:function(a,b,c){n(a,c,function(c,d){e.setAttr(a,b,q(d))});e.setAttr(a,b,q(c()))},simpleAttribute:function(a,b,c){n(a,c,function(c,d){e.setAttr(a,b,d)});e.setAttr(a,b,c())}};f.attr=f.simpleAttribute;f.attrs=f.attributes;var b=/(\r|\n)+/g,q=function(a){return a=a.replace(e.attrReg,"").replace(b,""),/^["'].*["']$/.test(a)?a.substr(1,a.length-2):a};return a.view.live=f,f}(z,W,K,da,fa),W=function(a,e,m){var g,h=[],p=function(a){a=
e.tagMap[a]||"span";return"span"===a?"@@!!@@":"<"+a+">"+p(a)+"</"+a+">"},n=function(b,c){if("string"==typeof b)return b;if(!b&&0!==b)return"";var d=b.hookup&&function(a,c){b.hookup.call(b,a,c)}||"function"==typeof b&&b;return d?c?"<"+c+" "+a.view.hook(d)+"></"+c+">":(h.push(d),""):""+b},c=function(b,c){return"string"==typeof b||"number"==typeof b?a.esc(b):n(b,c)},d=!1,f=function(){};return a.extend(a.view,{live:m,setupLists:function(){var b,c=a.view.lists;return a.view.lists=function(a,c){return b=
{list:a,renderer:c},Math.random()},function(){return a.view.lists=c,b}},getHooks:function(){var a=h.slice(0);return g=a,h=[],a},onlytxt:function(a,d){return c(d.call(a))},txt:function(b,q,s,l,r){var k,v,A,x=e.tagMap[q]||"span",H=!1,w=f;d?r=r.call(l):("string"!=typeof s&&1!==s||(d=!0),H=a.view.setupLists(),w=function(){v.unbind("change",f)},v=a.compute(r,l,!1),v.bind("change",f),k=H(),r=v(),d=!1,H=v.hasDependencies);if(k)return w(),"<"+x+a.view.hook(function(a,b){m.list(a,k.list,k.renderer,l,b)})+
"></"+x+">";if(!H||"function"==typeof r)return w(),(d||2===b||!b?n:c)(r,0===s&&x);q=e.tagToContentPropMap[q];return 0!==s||q?1===s?(h.push(function(a){m.attributes(a,v,v());w()}),v()):2===b?(A=s,h.push(function(a){m.specialAttribute(a,A,v);w()}),v()):(A=0===s?q:s,(0===s?g:h).push(function(a){m.attribute(a,A,v);w()}),m.attributePlaceholder):"<"+x+a.view.hook(b&&"object"!=typeof r?function(a,b){m.text(a,v,b);w()}:function(a,b){m.html(a,v,b);w()})+">"+p(x)+"</"+x+">"}}),a}(K,W,da,ca),K=function(a){a.view.ext=
".mustache";var e=/((([^\s]+?=)?('.*?'|".*?"))|.*?)\s/g,m=/^(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false|null|undefined)|((.+?)=(('.*?'|".*?"|[0-9]+\.?[0-9]*|true|false)|(.+))))$/,g=function(a){return a&&"string"==typeof a.get},h=function(b){return b instanceof a.Map||b&&!!b._get},p=function(a){return a&&a.splice&&"number"==typeof a.length},n=function(b,c,d){return function(e,f){return e===u||e instanceof a.view.Scope||(e=c.add(e)),f===u||f instanceof a.view.Options||(f=d.add(f)),b(e||c,f||d)}},c=function(b){if(this.constructor!==
c){var d=new c(b);return function(a,b){return d.render(a,b)}}return"function"==typeof b?void(this.template={fn:b}):(a.extend(this,b),void(this.template=this.scanner.scan(this.text,this.name)))};a.Mustache=window.Mustache=c;c.prototype.render=function(b,c){return b instanceof a.view.Scope||(b=new a.view.Scope(b||{})),c instanceof a.view.Options||(c=new a.view.Options(c||{})),c=c||{},this.template.fn.call(b,b,c)};a.extend(c.prototype,{scanner:new a.view.Scanner({text:{start:"",scope:"scope",options:",options: options",
argNames:"scope,options"},tokens:[["returnLeft","{{{","{{[{&]"],["commentFull","{{!}}","^[\\s\\t]*{{!.+?}}\\n"],["commentLeft","{{!","(\\n[\\s\\t]*{{!|{{!)"],["escapeFull","{{}}","(^[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}\\n|\\n[\\s\\t]*{{[#/^][^}]+?}}$)",function(a){return{before:/^\n.+?\n$/.test(a)?"\n":"",content:a.match(/\{\{(.+?)\}\}/)[1]||""}}],["escapeLeft","{{"],["returnRight","}}}"],["right","}}"]],helpers:[{name:/^>[\s]*\w*/,fn:function(b){return"can.Mustache.renderPartial('"+
a.trim(b.replace(/^>\s?/,"")).replace(/["|']/g,"")+"',scope,options)"}},{name:/^\s*data\s/,fn:function(a){return"can.proxy(function(__){can.data(can.$(__),'"+a.match(/["|'](.*)["|']/)[1]+"', this.attr('.')); }, scope)"}},{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(a){a=a.match(/\s*\(([\$\w]+)\)\s*->([^\n]*)/);return"can.proxy(function(__){var "+a[1]+"=can.$(__);with(scope.attr('.')){"+a[2]+"}}, this);"}},{name:/^.*$/,fn:function(b,c){var d=!1,f={content:"",startTxt:!1,startOnlyTxt:!1,end:!1};
if(b=a.trim(b),b.length&&(d=b.match(/^([#^/]|else$)/))){switch(d=d[0]){case "#":case "^":c.specialAttribute?f.startOnlyTxt=!0:(f.startTxt=!0,f.escaped=0);break;case "/":return f.end=!0,f.content+='return ___v1ew.join("");}}])',f}b=b.substring(1)}if("else"!==d){var g,k=[],h=[],n=0;f.content+="can.Mustache.txt(\n"+(c.specialAttribute?"{scope:scope,options:options, special: true}":"{scope:scope,options:options}")+",\n"+(d?'"'+d+'"':"null")+",";(a.trim(b)+" ").replace(e,function(a,b){n&&(g=b.match(m))?
g[2]?k.push(g[0]):h.push(g[4]+":"+(g[6]?g[6]:'{get:"'+g[5].replace(/"/g,'\\"')+'"}')):k.push('{get:"'+b.replace(/"/g,'\\"')+'"}');n++});f.content+=k.join(",");h.length&&(f.content+=",{___h4sh:{"+h.join(",")+"}}")}switch(d&&"else"!==d&&(f.content+=",[\n\n"),d){case "^":case "#":f.content+="{fn:function(scope,options){var ___v1ew = [];";break;case "else":f.content+='return ___v1ew.join("");}},\n{inverse:function(scope,options){\nvar ___v1ew = [];';break;default:f.content+=")"}return d||(f.startTxt=
!0,f.end=!0),f}}]})});for(var d=a.view.Scanner.prototype.helpers,f=0;f<d.length;f++)c.prototype.scanner.helpers.unshift(d[f]);return c.txt=function(b,d,e){for(var f,r,k=b.scope,m=b.options,A=[],x={fn:function(){},inverse:function(){}},H=k.attr("."),w=!0,C=3;C<arguments.length;C++){var B=arguments[C];if(d&&a.isArray(B))x=a.extend.apply(a,[x].concat(B));else if(B&&B.___h4sh){f=B.___h4sh;for(var u in f)g(f[u])&&(f[u]=c.get(f[u].get,b,!1,!0))}else A.push(B&&g(B)?c.get(B.get,b,!1,!0):B)}g(e)&&(w=e.get,
e=c.get(e.get,b,A.length,!1),w=w===e);if(x.fn=n(x.fn,k,m),x.inverse=n(x.inverse,k,m),"^"===d)C=x.fn,x.fn=x.inverse,x.inverse=C;return(r=w&&"string"==typeof e&&c.getHelper(e,m)||a.isFunction(e)&&!e.isComputed&&{fn:e})?(a.extend(x,{context:H,scope:k,contexts:k,hash:f}),A.push(x),function(){return r.fn.apply(H,A)||""}):function(){var b;b=a.isFunction(e)&&e.isComputed?e():e;var c,f,k,l=A.length?A:[b],g=!0,r=[];if(d)for(c=0;c<l.length;c++)k=l[c],f="undefined"!=typeof k&&h(k),p(k)?"#"===d?g=g&&!(f?!k.attr("length"):
!k.length):"^"===d&&(g=g&&!(f?k.attr("length"):k.length)):g="#"===d?g&&!!k:"^"===d?g&&!k:g;if(g){if("#"===d){if(p(b)){f=h(b);for(c=0;c<b.length;c++)r.push(x.fn(f?b.attr(""+c):b[c]));return r.join("")}return x.fn(b||{})||""}return"^"===d?x.inverse(b||{})||"":""+(null!=b?b:"")}return""}},c.get=function(b,d,e,f){var g=d.scope.attr("."),k=d.options||{};if(e){if(c.getHelper(b,k))return b;if(d.scope&&a.isFunction(g[b]))return g[b]}e=d.scope.computeData(b,{isArgument:f,args:[g,d.scope]});f=e.compute;a.compute.temporarilyBind(f);
g=e.initialValue;return g!==u&&e.scope===d.scope||!c.getHelper(b,k)?f.hasDependencies?f:g:b},c.resolve=function(b){return h(b)&&p(b)&&b.attr("length")?b:a.isFunction(b)?b():b},a.view.Options=a.view.Scope.extend({init:function(b){b.helpers||b.partials||b.tags||(b={helpers:b});a.view.Scope.prototype.init.apply(this,arguments)}}),c._helpers={},c.registerHelper=function(a,c){this._helpers[a]={name:a,fn:c}},c.getHelper=function(a,c){var d=c.attr("helpers."+a);return d?{fn:d}:this._helpers[a]},c.render=
function(b,c,d){if(!a.view.cached[b]){var e=a.__clearReading();c.attr("partial")&&(b=c.attr("partial"));a.__setReading(e)}return a.view.render(b,c,d)},c.safeString=function(a){return{toString:function(){return a}}},c.renderPartial=function(b,c,d){var e=d.attr("partials."+b);return e?e.render?e.render(c,d):e(c,d):a.Mustache.render(b,c,d)},a.each({"if":function(b,d){var e;return e=a.isFunction(b)?a.compute.truthy(b)():!!c.resolve(b),e?d.fn(d.contexts||this):d.inverse(d.contexts||this)},unless:function(b,
d){return c._helpers["if"].fn.apply(this,[a.isFunction(b)?a.compute(function(){return!b()}):!b,d])},each:function(b,d){var e,f,g;e=c.resolve(b);var k=[];if(a.view.lists&&(e instanceof a.List||b&&b.isComputed&&e===u))return a.view.lists(b,function(a,b){return d.fn(d.scope.add({"@index":b}).add(a))});if(b=e,b&&p(b)){for(g=0;g<b.length;g++)k.push(d.fn(d.scope.add({"@index":g}).add(b[g])));return k.join("")}if(h(b)){e=a.Map.keys(b);for(g=0;g<e.length;g++)f=e[g],k.push(d.fn(d.scope.add({"@key":f}).add(b[f])));
return k.join("")}if(b instanceof Object){for(f in b)k.push(d.fn(d.scope.add({"@key":f}).add(b[f])));return k.join("")}},"with":function(a,d){var e=a;return a=c.resolve(a),a?d.fn(e):void 0},log:function(a,c){"undefined"!=typeof console&&console.log&&(c?console.log(a,c.context):console.log(a.context))}},function(a,d){c.registerHelper(d,a)}),a.view.register({suffix:"mustache",contentType:"x-mustache-template",script:function(a,d){return"can.Mustache(function(scope,options) { "+(new c({text:d,name:a})).template.out+
" })"},renderer:function(a,d){return c({text:d,name:a})}}),a.mustache.registerHelper=a.proxy(a.Mustache.registerHelper,a.Mustache),a.mustache.safeString=a.Mustache.safeString,a}(z,Y,K,ea,I,W),I=function(a){var e=function(){var a={"":!0,"true":!0,"false":!1},c=function(b){if(b&&b.getAttribute)return b=b.getAttribute("contenteditable"),a[b]};return function(a){var d=c(a);return"boolean"==typeof d?d:!!c(a.parentNode)}}(),m=function(a){return"{"===a[0]&&"}"===a[a.length-1]?a.substr(1,a.length-2):a};a.view.attr("can-value",
function(d,f){var b,g,s=m(d.getAttribute("can-value")),s=f.scope.computeData(s,{args:[]}).compute;return"input"===d.nodeName.toLowerCase()&&("checkbox"===d.type&&(b=a.attr.has(d,"can-true-value")?d.getAttribute("can-true-value"):!0,g=a.attr.has(d,"can-false-value")?d.getAttribute("can-false-value"):!1),"checkbox"===d.type||"radio"===d.type)?void new p(d,{value:s,trueValue:b,falseValue:g}):"select"===d.nodeName.toLowerCase()&&d.multiple?void new n(d,{value:s}):e(d)?void new c(d,{value:s}):void new h(d,
{value:s})});var g={enter:function(a,c,b){return{event:"keyup",handler:function(a){return 13===a.keyCode?b.call(this,a):void 0}}}};a.view.attr(/can-[\w\.]+/,function(c,e){var b=e.attributeName,h=b.substr(4),n=function(g){var h=m(c.getAttribute(b)),h=e.scope.read(h,{returnObserveMethods:!0,isArgument:!0});return h.value.call(h.parent,e.scope._context,a.$(this),g)};g[h]&&(h=g[h](e,c,n),n=h.handler,h=h.event);a.bind.call(c,h,n)});var h=a.Control.extend({init:function(){"SELECT"===this.element[0].nodeName.toUpperCase()?
setTimeout(a.proxy(this.set,this),1):this.set()},"{value} change":"set",set:function(){if(this.element){var a=this.options.value();this.element[0].value=null==a?"":a}},change:function(){this.element&&this.options.value(this.element[0].value)}}),p=a.Control.extend({init:function(){this.isCheckbox="checkbox"===this.element[0].type.toLowerCase();this.check()},"{value} change":"check",check:function(){if(this.isCheckbox){var c=this.options.value();this.element[0].checked=c===(this.options.trueValue||
!0)}else c=this.options.value()==this.element[0].value?"set":"remove",a.attr[c](this.element[0],"checked",!0)},change:function(){this.isCheckbox?this.options.value(this.element[0].checked?this.options.trueValue:this.options.falseValue):this.element[0].checked&&this.options.value(this.element[0].value)}}),n=h.extend({init:function(){this.delimiter=";";this.set()},set:function(){var c=this.options.value();"string"==typeof c?(c=c.split(this.delimiter),this.isString=!0):c&&(c=a.makeArray(c));var e={};
a.each(c,function(a){e[a]=!0});a.each(this.element[0].childNodes,function(a){a.value&&(a.selected=!!e[a.value])})},get:function(){var c=[];return a.each(this.element[0].childNodes,function(a){a.selected&&a.value&&c.push(a.value)}),c},change:function(){var c=this.get(),e=this.options.value();this.isString||"string"==typeof e?(this.isString=!0,this.options.value(c.join(this.delimiter))):e instanceof a.List?e.attr(c,!0):this.options.value(c)}}),c=a.Control.extend({init:function(){this.set();this.on("blur",
"setValue")},"{value} change":"set",set:function(){var a=this.options.value();this.element[0].innerHTML="undefined"==typeof a?"":a},setValue:function(){this.options.value(this.element[0].innerHTML)}})}(z,K,X);(function(a,e){var m=/^(dataViewId|class|id)$/i,g=/\{([^\}]+)\}/g,h=a.Component=a.Construct.extend({setup:function(){if(a.Construct.setup.apply(this,arguments),a.Component){var e=this,c=this.prototype.scope;if(this.Control=p.extend(this.prototype.events),c&&("object"!=typeof c||c instanceof a.Map)?
c.prototype instanceof a.Map&&(this.Map=c):this.Map=a.Map.extend(c||{}),this.attributeScopeMappings={},a.each(this.Map?this.Map.defaults:{},function(a,b){"@"===a&&(e.attributeScopeMappings[b]=b)}),this.prototype.template)if("function"==typeof this.prototype.template){var d=this.prototype.template;this.renderer=function(){return a.view.frag(d.apply(null,arguments))}}else this.renderer=a.view.mustache(this.prototype.template);a.view.tag(this.prototype.tag,function(a,b){new e(a,b)})}}},{setup:function(g,
c){var d,f,b,h={},p=this,l={};if(a.each(this.constructor.attributeScopeMappings,function(b,c){h[c]=g.getAttribute(a.hyphenate(b))}),a.each(a.makeArray(g.attributes),function(b){var k=a.camelize(b.nodeName.toLowerCase()),r=b.value;if(!(p.constructor.attributeScopeMappings[k]||m.test(k)||e.attr(b.nodeName))){if("{"===r[0]&&"}"===r[r.length-1])r=r.substr(1,r.length-2);else if("legacy"!==c.templateType)return void(h[k]=r);b=c.scope.computeData(r,{args:[]});var v=b.compute,C=function(a,b){d=k;f.attr(k,
b);d=null};v.bind("change",C);h[k]=v();v.hasDependencies?(a.bind.call(g,"removed",function(){v.unbind("change",C)}),l[k]=b):v.unbind("change",C)}}),this.constructor.Map)f=new this.constructor.Map(h);else if(this.scope instanceof a.Map)f=this.scope;else if(a.isFunction(this.scope)){var r=this.scope(h,c.scope,g);f=r instanceof a.Map?r:r.prototype instanceof a.Map?new r(h):new (a.Map.extend(r))(h)}var k={};a.each(l,function(a,b){k[b]=function(c,e){d!==b&&a.compute(e)};f.bind(b,k[b])});a.bind.call(g,
"removed",function(){a.each(k,function(a,b){f.unbind(b,k[b])})});a.isEmptyObject(this.constructor.attributeScopeMappings)&&"legacy"===c.templateType||a.bind.call(g,"attributes",function(b){var c=a.camelize(b.attributeName);l[c]||f.attr(c,g.getAttribute(b.attributeName))});this.scope=f;a.data(a.$(g),"scope",this.scope);var r=c.scope.add(this.scope),v={helpers:{}};a.each(this.helpers||{},function(b,c){a.isFunction(b)&&(v.helpers[c]=function(){return b.apply(f,arguments)})});this._control=new this.constructor.Control(g,
{scope:this.scope});this.constructor.renderer?(v.tags||(v.tags={}),v.tags.content=function x(b,d){var e=c.subtemplate||d.subtemplate;e&&(delete v.tags.content,a.view.live.replace([b],e(d.scope,d.options)),v.tags.content=x)},b=this.constructor.renderer(r,c.options.add(v))):b="legacy"===c.templateType?a.view.frag(c.subtemplate?c.subtemplate(r,c.options.add(v)):""):c.subtemplate?c.subtemplate(r,c.options.add(v)):document.createDocumentFragment();a.appendChild(g,b)}}),p=a.Control.extend({_lookup:function(a){return[a.scope,
a,window]},_action:function(e,c,d){var f;if(g.lastIndex=0,f=g.test(e),d||!f){if(f){f=a.compute(function(){var b,d=e.replace(g,function(d,e){var f;return"scope"===e?(b=c.scope,""):(e=e.replace(/^scope\./,""),f=a.compute.read(c.scope,e.split("."),{isArgument:!0}).value,f===u&&(f=a.getObject(e)),"string"==typeof f?f:(b=f,""))}),f=d.split(/\s+/g),h=f.pop();return{processor:this.processors[h]||this.processors.click,parts:[d,f.join(" "),h],delegate:b||u}},this);var b=function(a,b){d._bindings.control[e](d.element);
d._bindings.control[e]=b.processor(b.delegate||d.element,b.parts[2],b.parts[1],e,d)};return f.bind("change",b),d._bindings.readyComputes[e]={compute:f,handler:b},f()}return a.Control._action.apply(this,arguments)}}},{setup:function(e,c){return this.scope=c.scope,a.Control.prototype.setup.call(this,e,c)},off:function(){this._bindings&&a.each(this._bindings.readyComputes||{},function(a){a.compute.unbind("change",a.handler)});a.Control.prototype.off.apply(this,arguments);this._bindings.readyComputes=
{}}});return window.$&&$.fn&&($.fn.scope=function(a){return a?this.data("scope").attr(a):this.data("scope")}),a.scope=function(e,c){return e=a.$(e),c?a.data(e,"scope").attr(c):a.data(e,"scope")},h})(z,R,X,aa,K,I);(function(a){var e=function(b,c,e){var d=new a.Deferred;return b.then(function(){var b=a.makeArray(arguments),f=!0;try{b[0]=e.apply(c,b)}catch(g){f=!1,d.rejectWith(d,[g].concat(b))}f&&d.resolveWith(d,b)},function(){d.rejectWith(this,arguments)}),"function"==typeof b.abort&&(d.abort=function(){return b.abort()}),
d},m=0,g=function(b){return a.__reading(b,b.constructor.id),b.__get(b.constructor.id)},h=function(b,c,d,f,h){var m;a.isArray(b)?(m=b[1],b=b[0]):m=b.serialize();m=[m];var p,n,q=b.constructor;return("update"===c||"destroy"===c)&&m.unshift(g(b)),n=q[c].apply(q,m),p=e(n,b,function(a){return b[h||c+"d"](a,n),b}),n.abort&&(p.abort=function(){n.abort()}),p.then(d,f),p},p={models:function(b){return function(c,d){if(a.Model._reqs++,c){if(c instanceof this.List)return c;var e=this,f=[],g=e.List||s,h=d instanceof
a.List?d:new g,g=a.isArray(c),m=c instanceof s,m=g?c:m?c.serialize():a.getObject(b||"data",c);if("undefined"==typeof m)throw Error("Could not get any raw data while converting using .models");return h.length&&h.splice(0),a.each(m,function(a){f.push(e.model(a))}),h.push.apply(h,f),g||a.each(c,function(a,b){"data"!==b&&h.attr(b,a)}),setTimeout(a.proxy(this._clean,this),1),h}}},model:function(b){return function(c){if(c){"function"==typeof c.serialize&&(c=c.serialize());this.parseModel?c=this.parseModel.apply(this,
arguments):b&&(c=a.getObject(b||"data",c));var d=c[this.id];return(d||0===d)&&this.store[d]?this.store[d].attr(c,this.removeAttr||!1):new this(c)}}}},n=function(b){return function(c){return b?a.getObject(b||"data",c):c}},c={parseModel:n,parseModels:n},d={create:{url:"_shortName",type:"post"},update:{data:function(b,c){c=c||{};var d=this.id;return c[d]&&c[d]!==b&&(c["new"+a.capitalize(b)]=c[d],delete c[d]),c[d]=b,c},type:"put"},destroy:{type:"delete",data:function(a,b){return b=b||{},b.id=b[this.id]=
a,b}},findAll:{url:"_shortName"},findOne:{}},f=function(b,c){return function(d){d=b.data?b.data.apply(this,arguments):d;var e=c||this[b.url||"_url"],f=d,g=b.type||"get",h={};"string"==typeof e?(e=e.split(/\s+/),h.url=e.pop(),e.length&&(h.type=e.pop())):a.extend(h,e);return h.data="object"!=typeof f||a.isArray(f)?f:a.extend(h.data||{},f),h.url=a.sub(h.url,h.data,!0),a.ajax(a.extend({type:g||"post",dataType:"json",success:void 0,error:void 0},h))}},b=function(a,b){if(a.resource){var c=a.resource.replace(/\/+$/,
"");return"findAll"===b||"create"===b?c:c+"/{"+a.id+"}"}};a.Model=a.Map.extend({fullName:"can.Model",_reqs:0,setup:function(e,g,k,h){if("string"!==g&&(h=k,k=g),h||(h=k),this.store={},a.Map.setup.apply(this,arguments),a.Model){k&&k.List?(this.List=k.List,this.List.Map=this):this.List=e.List.extend({Map:this},{});var n=this,q=a.proxy(this._clean,n);a.each(d,function(c,d){if(a.isFunction(n[d])||(n[d]=f(c,n[d]?n[d]:b(n,d))),n["make"+a.capitalize(d)]){var k=n["make"+a.capitalize(d)](n[d]);a.Construct._overwrite(n,
e,d,function(){a.Model._reqs++;var b=k.apply(this,arguments),c=b.then(q,q);return c.abort=b.abort,c})}});a.each(p,function(b,d){var f="parse"+a.capitalize(d),k=n[d];"string"==typeof k?(a.Construct._overwrite(n,e,f,c[f](k)),a.Construct._overwrite(n,e,d,b(k))):h&&(h[d]||h[f])||a.Construct._overwrite(n,e,f,c[f]())});a.each(c,function(b,c){"string"==typeof n[c]&&a.Construct._overwrite(n,e,c,b(n[c]))});"can.Model"!==n.fullName&&n.fullName||(n.fullName="Model"+ ++m);a.Model._reqs=0;this._url=this._shortName+
"/{"+this.id+"}"}},_ajax:f,_makeRequest:h,_clean:function(b){if(a.Model._reqs--,!a.Model._reqs)for(var c in this.store)this.store[c]._bindings||delete this.store[c];return b},models:p.models("data"),model:p.model()},{setup:function(b){var c=b&&b[this.constructor.id];a.Model._reqs&&null!=c&&(this.constructor.store[c]=this);a.Map.prototype.setup.apply(this,arguments)},isNew:function(){var a=g(this);return!(a||0===a)},save:function(a,b){return h(this,this.isNew()?"create":"update",a,b)},destroy:function(b,
c){if(this.isNew()){var d=this,e=a.Deferred();return e.then(b,c),e.done(function(a){d.destroyed(a)}).resolve(d)}return h(this,"destroy",b,c,"destroyed")},_bindsetup:function(){return this.constructor.store[this.__get(this.constructor.id)]=this,a.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[g(this)],a.Map.prototype._bindteardown.apply(this,arguments)},___set:function(b,c){a.Map.prototype.___set.call(this,b,c);b===this.constructor.id&&
this._bindings&&(this.constructor.store[g(this)]=this)}});var n=function(b){var c="parse"+a.capitalize(b);return function(a){return this[c]&&(a=this[c].apply(this,arguments)),this[b](a)}},q=function(a){return this.parseModel?this.parseModel.apply(this,arguments):this.model(a)},n={makeFindAll:n("models"),makeFindOne:n("model"),makeCreate:q,makeUpdate:q};a.each(n,function(b,c){a.Model[c]=function(c){return function(){var d=a.makeArray(arguments),f=a.isFunction(d[1])?d.splice(0,1):d.splice(0,2),f=e(c.apply(this,
f),this,b);return f.then(d[0],d[1]),f}}});a.each(["created","updated","destroyed"],function(b){a.Model.prototype[b]=function(c){var d=this.constructor;c&&"object"==typeof c&&this.attr(c.attr?c.attr():c);a.dispatch.call(this,{type:"change",target:this},[b]);a.dispatch.call(d,b,[this])}});var s=a.Model.List=a.List.extend({_bubbleRule:function(b,c){return a.List._bubbleRule(b,c)||"destroyed"}},{setup:function(b){a.isPlainObject(b)&&!a.isArray(b)?(a.List.prototype.setup.apply(this),this.replace(this.constructor.Map.findAll(b))):
a.List.prototype.setup.apply(this,arguments);this._init=1;this.bind("destroyed",a.proxy(this._destroyed,this));delete this._init},_destroyed:function(a,b){if(/\w+/.test(b))for(var c;-1<(c=this.indexOf(a.target));)this.splice(c,1)}});return a.Model})(z,L,P);R=function(a){var e=/^\d+$/,m=/([^\[\]]+)|(\[\])/g,g=/([^?#]*)(#.*)?$/,h=function(a){return decodeURIComponent(a.replace(/\+/g," "))};return a.extend(a,{deparam:function(p){var n,c,d={};return p&&g.test(p)&&(n=p.split("&"),a.each(n,function(a){a=
a.split("=");var b=h(a.shift()),g=h(a.join("=")),n=d;if(b){a=b.match(m);for(var b=0,l=a.length-1;l>b;b++)n[a[b]]||(n[a[b]]=e.test(a[b+1])||"[]"===a[b+1]?[]:{}),n=n[a[b]];c=a.pop();"[]"===c?n.push(g):n[c]=g}})),d}}),a}(z,ca);L=function(a){var e,m,g,h,p=/\:([\w\.]+)/g,n=function(b){var c=[];return a.each(b,function(b,d){c.push(("className"===d?"class":d)+'="'+("href"===d?b:a.esc(b))+'"')}),c.join(" ")},c=function(a,b){var c=0,d=0,e={},f;for(f in a.defaults)a.defaults[f]===b[f]&&(e[f]=1,c++);for(;d<
a.names.length;d++){if(!b.hasOwnProperty(a.names[d]))return-1;e[a.names[d]]||c++}return c},d=window.location,f=a.each,b=a.extend,q=function(b){return b&&"object"==typeof b?(b=b instanceof a.Map?b.attr():a.isFunction(b.slice)?b.slice():a.extend({},b),a.each(b,function(a,c){b[c]=q(a)})):b!==u&&null!==b&&a.isFunction(b.toString)&&(b=b.toString()),b},s=function(a){return a.replace(/\\/g,"")},l=function(){h=1;clearTimeout(e);e=setTimeout(function(){h=0;var b=a.route.data.serialize(),b=a.route.param(b,
!0);a.route._call("setURL",b);g=b},10)};a.route=function(b,c){var d=a.route._call("root");d.lastIndexOf("/")===d.length-1&&0===b.indexOf("/")&&(b=b.substr(1));c=c||{};var e,f=[],g="";e=p.lastIndex=0;for(var h=a.route._call("querySeparator"),l=a.route._call("matchSlashes");d=p.exec(b);)f.push(d[1]),g+=s(b.substring(e,p.lastIndex-d[0].length)),e="\\"+(s(b.substr(p.lastIndex,1))||h+(l?"":"|/")),g+="([^"+e+"]"+(c[d[1]]?"*":"+")+")",e=p.lastIndex;return g+=b.substr(e).replace("\\",""),a.route.routes[b]=
{test:new RegExp("^"+g+"($|"+(h+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")+")"),route:b,names:f,defaults:c,length:b.split("/").length},a.route};b(a.route,{param:function(d,e){var g,h,l=0,m=d.route,n=0;if(delete d.route,f(d,function(){n++}),f(a.route.routes,function(a){return h=c(a,d),h>l&&(g=a,l=h),h>=n?!1:void 0}),a.route.routes[m]&&c(a.route.routes[m],d)===l&&(g=a.route.routes[m]),g){var q,r=b({},d),m=g.route.replace(p,function(a,b){return delete r[b],d[b]===g.defaults[b]?"":encodeURIComponent(d[b])}).replace("\\",
"");return f(g.defaults,function(a,b){r[b]===a&&delete r[b]}),q=a.param(r),e&&a.route.attr("route",g.route),m+(q?a.route._call("querySeparator")+q:"")}return a.isEmptyObject(d)?"":a.route._call("querySeparator")+a.param(d)},deparam:function(c){var d=a.route._call("root");d.lastIndexOf("/")===d.length-1&&0===c.indexOf("/")&&(c=c.substr(1));var e={length:-1},g=a.route._call("querySeparator"),d=a.route._call("paramsMatcher");if(f(a.route.routes,function(a){a.test.test(c)&&a.length>e.length&&(e=a)}),
-1<e.length){var h=c.match(e.test),l=h.shift(),m=(l=c.substr(l.length-(h[h.length-1]===g?1:0)))&&d.test(l)?a.deparam(l.slice(1)):{};return m=b(!0,{},e.defaults,m),f(h,function(a,b){a&&a!==g&&(m[e.names[b]]=decodeURIComponent(a))}),m.route=e.route,m}return c.charAt(0)!==g&&(c=g+c),d.test(c)?a.deparam(c.slice(1)):{}},data:new a.Map({}),map:function(b){b=b.prototype instanceof a.Map?new b:b;a.route.data=b},routes:{},ready:function(b){return!0!==b&&(a.route._setup(),a.route.setState()),a.route},url:function(b,
c){return c&&(b=a.extend({},a.route.deparam(a.route._call("matchingPartOfURL")),b)),a.route._call("root")+a.route.param(b)},link:function(c,d,e,f){return"<a "+n(b({href:a.route.url(d,f)},e))+">"+c+"</a>"},current:function(b){return this._call("matchingPartOfURL")===a.route.param(b)},bindings:{hashchange:{paramsMatcher:/^(?:&[^=]+=[^&]*)+/,querySeparator:"&",matchSlashes:!1,bind:function(){a.bind.call(window,"hashchange",r)},unbind:function(){a.unbind.call(window,"hashchange",r)},matchingPartOfURL:function(){return d.href.split(/#!?/)[1]||
""},setURL:function(a){return d.hash="#!"+a,a},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){a.route.currentBinding||(a.route._call("bind"),a.route.bind("change",l),a.route.currentBinding=a.route.defaultBinding)},_teardown:function(){a.route.currentBinding&&(a.route._call("unbind"),a.route.unbind("change",l),a.route.currentBinding=null);clearTimeout(e);h=0},_call:function(){var b=a.makeArray(arguments),c=b.shift(),d=a.route.bindings[a.route.currentBinding||a.route.defaultBinding],
c=d[c];return c.apply?c.apply(d,b):c}});f("bind unbind on off delegate undelegate removeAttr compute _get __get".split(" "),function(b){a.route[b]=function(){return a.route.data[b]?a.route.data[b].apply(a.route.data,arguments):void 0}});a.route.attr=function(b,c){var d,e=typeof b;return d=c===u?arguments:"string"!==e&&"number"!==e?[q(b),c]:[b,q(c)],a.route.data.attr.apply(a.route.data,d)};var r=a.route.setState=function(){var b=a.route._call("matchingPartOfURL"),c=m;if(m=a.route.deparam(b),!h||b!==
g){a.batch.start();for(var d in c)m[d]||a.route.removeAttr(d);a.route.attr(m);a.batch.stop()}};return a.route}(z,L,P,R);(function(a){return a.Control.processors.route=function(e,m,g,h,p){g=g||"";a.route.routes[g]||("/"===g[0]&&(g=g.substring(1)),a.route(g));var n,c=function(c){a.route.attr("route")!==g||c.batchNum!==u&&c.batchNum===n||(n=c.batchNum,c=a.route.attr(),delete c.route,a.isFunction(p[h])?p[h](c):p[p[h]](c))};return a.route.bind("change",c),function(){a.route.unbind("change",c)}},a})(z,
L,X);window.can=M}();
